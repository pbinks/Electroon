<div>
    <div v-if='status == "connecting"' class="uk-text-center">
        Connecting...<br><small class="uk-text-muted">Plugin authorization required</small>
    </div>

    <div v-else>
        <div class="uk-grid uk-grid-small uk-margin-small-bottom" data-uk-grid-margin="">        
            <div class="uk-width-2-3">
                <select v-model="current_zone_id" style="background: rgba(0,0,0,0.9); color: #38f; border: none; outline: none; padding: 3px;">
                    <option v-for="zone in zones" :value="zone.zone_id">{{ zone.display_name }}</option>
                </select>
            </div>
            <div class="uk-width-1-3 uk-text-center">
                <div v-if='zone' class='zonetitle uk-text-small uk-text-truncate'>
                    <small class="uk-text-muted" data-uk-tooltip="{pos: 'top'}" title="{{zone.display_name}}">{{status}} &emsp; ({{zone.state}})</small>
                    <span class="uk-hidden">{{zone.display_name}} {{zone.now_playing.image_key}}</span>
                </div>
            </div>
        </div>

        <div class="album nowplaying" v-if='zone && zone.now_playing.length'>
            <div class="photo" v-if='zone && zone.now_playing.artist_image_keys[0]' :style='{ "background-image": "url(http://" + server_ip + ":" + server_port + "/api/image/" + zone.now_playing.artist_image_keys[0] + "?scale=fit&width=100&height=100)" }'></div>
            <img v-if='zone && zone.now_playing.image_key' :src="'http://' + server_ip + ':' + server_port + '/api/image/' + zone.now_playing.image_key + '?scale=fit&width=100&height=100'"/>
            <div class="infos">
                <div class="song">
                    <span @click="toggleTrackAlbumTitle" class="line1 pointer uk-animation uk-animation-middle-left uk-animation-scale-up uk-text-truncate">{{zone.now_playing.three_line.line1}}</span>
                    <span @click="toggleTrackAlbumTitle" class="line2 pointer uk-animation uk-animation-middle-left uk-animation-scale-up uk-text-truncate uk-hidden">{{zone.now_playing.three_line.line3}}</span>
                    <small class="line3 uk-text-truncate">{{zone.now_playing.three_line.line2}}</small>
                </div>
            </div>
        </div>

        <div class="dashboard">
            <div class="list">
                <div id="listBtn" class="list-btn" @click="toggleList"><span></span></div>
            </div>

            <div class="player" v-if='zone && zone.state != "loading"'>
                <div class="time"><small class="current">{{to_time(zone.now_playing.seek_position)}}</small> / <small class="duration">{{to_time(zone.now_playing.length)}}</small></div>
                <div class="time-rail">
                    <div class="thumb" :style='{ left: zone.now_playing.seek_position / zone.now_playing.length * 100 + "%" }'></div>
                    <div class="track"></div>
                </div>
            </div>

            <div class="action-button">
                    <a class="radio" @click="transport_change_settings('auto_radio')"><i class="material-icons {{ zone.settings.auto_radio ? 'uk-text-primary' : 'md-color-white'}}">radio</i></a>
                <a class="random" @click="transport_change_settings('shuffle')"><i class="material-icons {{ zone.settings.shuffle ? 'uk-text-primary' : 'md-color-white'}}">shuffle</i></a>
                <a class="prev" @click="transport_previous"><i class="material-icons md-color-white">fast_rewind</i></a>
                <a class="play-pause" @click="transport_playpause"><i class="material-icons md-icon md-color-white">{{ zone.state == 'playing' ? 'pause' : 'play_arrow'}}</i></a>
                <a class="stop uk-hidden" @click="transport_stop"><i class="material-icons md-color-white">stop</i></a>
                <a class="next" @click="transport_next"><i class="material-icons md-color-white">fast_forward</i></a>
                <a class="volume" @click="show_volume">
                    <i class="material-icons md-color-white">volume_up</i>
                    <input @change="transport_volume" class="volume-input" type="number" min="0" max="100" value="">
                </a>
            </div>
        </div>

        <div class='lists browser' v-if='list'>     
            <div class="label">
                <div class="uk-grid uk-grid-small uk-margin-remove uk-padding-remove">
                    <div class="uk-width-2-10 uk-padding-remove" style="border: 1px solid #353535;">
                        <img style='width: 100%; min-height: 45px;' v-if='list.image_key' :src="'http://' + server_ip + ':' + server_port + '/api/image/' + list.image_key + '?scale=fit&width=100&height=100'">
                        <img style='width: 100%; height: 65px;' src="assets/img/roon.png">
                    </div>
                    <div class="uk-width-4-10 uk-text-truncate browsertitle" style="padding-left: 10px">{{list.title}}</div>
                    <div class="uk-width-4-10 uk-text-truncate browsersubtitle" style="padding-left: 5px">{{list.subtitle}}</div>
                </div>
            </div>

            <div class="box" style="height: 30px; position: relative; top: 0px; left: 80px;">
                <a href="back" v-if='list.level != 0' @click.prevent='list_back()'><i class="md-icon material-icons md-color-white">arrow_back</i></a>
                <a href="home" v-if='list.level != 0' @click.prevent='list_home()'><i class="md-icon material-icons md-color-white">home</i></a>
                <a href="refresh" @click.prevent='list_refresh()'><i class="md-icon material-icons md-color-white">refresh</i></a>
            </div>

            <div style="min-height: 32px; height: 32px; position: relative; left: 80px;">
                <div v-if='list.count != items.length'>
                    <tt v-if='listoffset >= 0'>
                        <a href='previouspage' @click.prevent='list_prev_page'><i class="md-icon material-icons uk-text-muted">keyboard_arrow_left</i></a>
                    </tt>
                    <small>{{listoffset+1}}-{{listoffset + items.length}} of {{list.count}}</small>
                    <tt v-if='listoffset + items.length < list.count'>
                        <a href='nextpage' @click.prevent='list_next_page'><i class="md-icon material-icons uk-text-muted">keyboard_arrow_right</i></a>
                    </tt>
                </div>
            </div>

            <ul class='browseitems'>
                <li v-for='item in items' class='browseitem'>
                    <form v-if='item.input_prompt' action='submit' @submit.prevent='list_input(item)' class='browseiteminput'>
                        <img style='float: right; margin: 0 1em;' v-if='item.image_key' :src="'http://' + server_ip + ':' + server_port + '/api/image/' + item.image_key + '?scale=fit&width=100&height=100'">
                        <div>{{item.input_prompt.prompt}}</div>
                        <div>
                            <input type='{{item.input_prompt.is_password ? "password" : "text"}}' v-model='item.input_prompt.value'>
                            <input type='submit' value='{{item.input_prompt.action}}' @click.prevent='list_input(item)'>
                        </div>
                        <br v-if='item.image_key' style='clear:both'/>
                    </form>
                    <div v-else @click.prevent='list_item(item)' class='browseitemnormal' >
                        <img style='float: right; margin: 0 1em;' v-if='item.image_key' :src="'http://' + server_ip + ':' + server_port + '/api/image/' + item.image_key + '?scale=fit&width=100&height=100'">
                        <div class='browseitemtitle uk-text-truncate'>{{item.title}}</div>
                        <div class='browseitemsubtitle uk-text-truncate uk-text-small uk-text-muted'>{{item.subtitle}}</div>
                        <br v-if='item.image_key' style='clear:both'/>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</div>